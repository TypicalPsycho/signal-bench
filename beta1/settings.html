<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SignalBench beta | Settings</title>
  <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon/favicon-16x16.png" />
  <link rel="apple-touch-icon" href="icons/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="icons/favicon/site.webmanifest" />
  <link rel="stylesheet" href="ui_shell.css" />
  <script src="ui_theme.js"></script>
  <script src="ui_store.js"></script>
</head>
<body>
  <!--
    Integration Notes (Settings)
    - Save preferences: tone, length, career level, employment status
    - Account controls: logout, delete (confirm text required)
    - Route back to /app
  -->
  <div class="wrap">
    <div class="page">
                  <header class="page-header">
        <div class="brand large">
          <div class="brand-menu">
            <button class="brand-logo" type="button" aria-label="Open navigation">
              <img src="icons/logo1_round_80.png" alt="SignalBench logo" />
            </button>
            <div class="brand-panel" role="menu">

          <a href="landing.html" role="menuitem">Landing</a>
          <a href="auth.html" role="menuitem">Auth</a>
          <a href="onboarding.html" role="menuitem">Onboarding</a>
          <a href="casefile_new.html" role="menuitem">Casefile Setup</a>
          <a href="app.html" role="menuitem">App</a>
          <a href="settings.html" role="menuitem">Settings</a>
          <a href="feedback.html" role="menuitem">Feedback</a>
            </div>
          </div>
          <span class="brand-name">SignalBench</span>
        </div>
      </header>

      <main class="page-body">
        <section class="card">
          <h1 class="title">Response Preferences</h1>
          <div class="row">
            <label class="field" style="flex:1">
              <span>Tone</span>
              <input id="toneSlider" type="range" min="0" max="10" value="5" style="width:100%;" />
              <div class="note">Softened and eloquent ←→ Blunt and direct</div>
              <div class="note"><small>The system remains direct and truthful either way.</small></div>
            </label>
            <label class="field" style="flex:1">
              <span>Length</span>
              <input id="lengthSlider" type="range" min="0" max="10" value="5" style="width:100%;" />
              <div class="note">Brief ←→ Detailed</div>
              <div class="note"><small>Choose how concise you want responses to be.</small></div>
            </label>
          </div>
        </section>

        <section class="card">
          <h2 class="title" style="font-size:22px;">Career context</h2>
          <p class="subtitle">These settings help SignalBench tailor guidance to your level and situation.</p>

          <div class="field" style="margin-top:10px;">
            <span>Career level sought for next role</span>
            <div class="note">Select up to two.</div>
            <div class="row" style="flex-direction:column; margin-top:6px;">
              <label class="pill"><input type="checkbox" name="level" value="ic" /> Individual contributor</label>
              <label class="pill"><input type="checkbox" name="level" value="mgr" /> Manager (people manager)</label>
              <label class="pill"><input type="checkbox" name="level" value="dir" /> Director (manages managers)</label>
              <label class="pill"><input type="checkbox" name="level" value="vp" /> VP / General Manager</label>
              <label class="pill"><input type="checkbox" name="level" value="cxo" /> C‑suite / President</label>
              <label class="pill"><input type="checkbox" name="level" value="na" /> Not sure</label>
            </div>
          </div>

          <div class="field" style="margin-top:12px;">
            <span>Current employment status</span>
            <div class="note">Select one.</div>
            <div class="row" style="flex-direction:column; margin-top:6px;">
              <label class="pill"><input type="radio" name="status" value="ft_adv" /> Employed, exploring internal or external opportunities</label>
              <label class="pill"><input type="radio" name="status" value="pt_contract" /> Contract or part‑time, seeking full‑time</label>
              <label class="pill"><input type="radio" name="status" value="transition_ft" /> In transition, seeking full‑time only</label>
              <label class="pill"><input type="radio" name="status" value="transition_any" /> In transition, open to full‑time, part‑time, or contract</label>
              <label class="pill"><input type="radio" name="status" value="na" /> Prefer not to say</label>
            </div>
          </div>
        </section>

        <section class="card">
          <h2 class="title" style="font-size:22px;">Theme</h2>
          <div class="row">
            <label class="pill"><input type="radio" name="theme" value="editorial" checked /> Editorial Slate</label>
            <label class="pill"><input type="radio" name="theme" value="graphite" /> Graphite + Signal</label>
            <label class="pill"><input type="radio" name="theme" value="linen" /> Warm Linen</label>
            <label class="pill"><input type="radio" name="theme" value="batman" /> Batman (Night)</label>
          </div>
        </section>

        <section class="card danger">
          <h2 class="title" style="font-size:22px;">Delete account</h2>
          <p class="note">This action is irreversible. All system data will be permanently deleted and cannot be recovered.</p>
          <label class="field" style="margin-top:8px;">
            <span>Type DELETE MY ACCOUNT to confirm</span>
            <input type="text" id="deleteConfirm" placeholder="DELETE MY ACCOUNT" />
          </label>
          <div class="row" style="margin-top:12px;">
            <button class="btn danger" id="deleteBtn" type="button" disabled>Delete account</button>
          </div>
        </section>

        <section class="card">
          <h2 class="title" style="font-size:22px;">Account Controls</h2>
          <div class="row">
            <button class="btn" type="button">Logout</button>
          </div>
        </section>

        <section class="card">
          <div class="row">
            <button class="btn primary" id="btnSaveSettings" type="button">Save Settings</button>
            <a class="btn" href="app.html">Return to App</a>
          </div>
        </section>

        <section class="card">
          <h2 class="title" style="font-size:22px;">Demo tools</h2>
          <div class="row">
            <button class="btn" id="btnLoadDemo" type="button">Load demo data</button>
            <button class="btn" id="btnClearDemo" type="button">Clear demo data</button>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script>
    const input = document.getElementById("deleteConfirm");
    const btn = document.getElementById("deleteBtn");
    const btnSave = document.getElementById("btnSaveSettings");
    const btnLoad = document.getElementById("btnLoadDemo");
    const btnClear = document.getElementById("btnClearDemo");
    const toneSlider = document.getElementById("toneSlider");
    const lengthSlider = document.getElementById("lengthSlider");
    const themeRadios = Array.from(document.querySelectorAll("input[name='theme']"));
    const levelChecks = Array.from(document.querySelectorAll("input[name='level']"));
    const statusRadios = Array.from(document.querySelectorAll("input[name='status']"));

    // Hydrate from store
    const storeInit = UIStore.load();
    if (storeInit.preferences){
      if (storeInit.preferences.tone) toneSlider.value = storeInit.preferences.tone;
      if (storeInit.preferences.length) lengthSlider.value = storeInit.preferences.length;
      if (Array.isArray(storeInit.preferences.careerLevel)){
        levelChecks.forEach((c) => c.checked = storeInit.preferences.careerLevel.includes(c.value));
      }
      if (storeInit.preferences.employmentStatus){
        const r = statusRadios.find((x) => x.value === storeInit.preferences.employmentStatus);
        if (r) r.checked = true;
      }
    }
    const themeKey = localStorage.getItem("sb.ui.theme") || "editorial";
    themeRadios.forEach((r) => r.checked = r.value === themeKey);
    input.addEventListener("input", () => {
      btn.disabled = input.value.trim() !== "DELETE MY ACCOUNT";
    });
    btn.addEventListener("click", () => alert("Delete account (stub)"));
    btnSave.addEventListener("click", () => {
      const store = UIStore.load();
      store.preferences = {
        tone: toneSlider.value,
        length: lengthSlider.value,
        careerLevel: levelChecks.filter((c) => c.checked).map((c) => c.value),
        employmentStatus: statusRadios.find((r) => r.checked)?.value || ""
      };
      const theme = themeRadios.find((r) => r.checked)?.value || "editorial";
      localStorage.setItem("sb.ui.theme", theme);
      UITheme.applyTheme(theme);
      UIStore.save(store);
      alert("Settings saved (demo).");
    });
    themeRadios.forEach((r) => r.addEventListener("change", () => {
      localStorage.setItem("sb.ui.theme", r.value);
      UITheme.applyTheme(r.value);
    }));
    btnLoad.addEventListener("click", () => {
      UIStore.seed();
      window.location.reload();
    });
    btnClear.addEventListener("click", () => {
      UIStore.clear();
      window.location.reload();
    });
  </script>


  <script>
    document.querySelectorAll(".brand-menu").forEach((menu) => {
      const trigger = menu.querySelector(".brand-logo");
      if (!trigger) return;
      trigger.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        menu.classList.toggle("open");
      });
    });
    document.addEventListener("click", (e) => {
      document.querySelectorAll(".brand-menu.open").forEach((menu) => {
        if (!menu.contains(e.target)) menu.classList.remove("open");
      });
    });
  </script>
</body>
</html>

